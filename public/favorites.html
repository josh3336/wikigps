<!DOCTYPE html> 
<html> 
<head> 
  <title>List Page</title> 
<body> 

<div data-role="page" id='pagefav' data-dom-cache='true'>

  <div data-role="header" data-id="myheader" data-position="fixed">
    <a href="testing" data-role="button" data-icon="home">Map</a> 
    <h1>Favorites</h1>
    <a href="list" data-role="button" data-icon="arrow-d">List</a> 

  </div><!-- /header -->

  <div data-role="content" id= 'favcontent'>
    <div id='favlistAddr'>
      <ul data-role="listview" id='favlist'>
      </ul>
    </div>
  </div><!-- /content -->

  <div data-role="footer" data-id='myfooter' data-position='fixed'>
    <a href="#" class='soundbutton' data-role="button" data-icon="delete">Sound</a> 
  </div><!-- /footer -->

  <script>
    $('#pagefav').on('pagebeforeshow',function(){
      $('#favcontent').prepend($('#pagehome').find('.map'));
      append_favlist(Session.markers);
      remove_markers(Session.markers);
      var favmarkers=return_favmarkers(Session['markers']);
      reset_colors(favmarkers);
      place_markers(favmarkers);
      //fit_bounds(Session.markers)
     $('#favlistAddr li').bind('click', function () {
          console.log('wtf click')
          panto_marker(this)
          $('#favlistAddr li').attr("data-theme", "c").removeClass("ui-btn-up-b").removeClass('ui-btn-hover-b').addClass("ui-btn-up-c").addClass('ui-btn-hover-c');
          $(this).attr("data-theme", "b").removeClass("ui-btn-up-c").removeClass('ui-btn-hover-c').addClass("ui-btn-up-b").addClass('ui-btn-hover-b');
          // $('#listwikifocus').html('')
          // $('#listwikifocus').append($('#wikifocus').children())
          // toggle_markers(Session.markers)
          //$(this).trigger('click')
          $("#favlist").listview("refresh");
      });
     //fix becuse soundbutton is getting binded twice
     $('.soundbutton').unbind('click');
     sound_click()
    })
      sound_click()
      check_sound('#pagefav')
  </script>
</div><!-- /page -->
</body>
</html>
